import{a as X,j as e}from"./api.D8po6JNo.js";import{r as O,R as L}from"./index.DYrVU9rO.js";import{s as J,u as F,g as G,a as P,v as Z,m as Q}from"./DashboardApp.BHTQHLPf.js";const f={BATTERY_MAIN:{id:"battery_main",label:"High Voltage Battery",icon:"battery",description:"Pin cao áp chính của xe",priority:1,aliases:["VEHICLE_STATUS_HV_BATTERY_SOC","VEHICLE_STATUS_REMAINING_DISTANCE","BMS_STATUS_STATE_OF_HEALTH","BMS_STATUS_BATTERY_TYPE","BMS_STATUS_BATTERY_SERIAL_NUMBER","BMS_STATUS_BATTERY_DECODED_MANUFACTURE_DATE","BMS_STATUS_THERMAL_RUNAWAY_WARNING"],fields:[{key:"battery_level",label:"State of Charge (SOC)",unit:"%",format:"number",warning:{below:20},critical:{below:10}},{key:"range",label:"Estimated Range",unit:"km",format:"number",warning:{below:50}},{key:"soh_percentage",label:"State of Health (SOH)",unit:"%",format:"number",warning:{below:80}},{key:"battery_type",label:"Battery Type",format:"string"},{key:"battery_serial",label:"Battery Serial Number",format:"string"},{key:"battery_manufacture_date",label:"Manufacture Date",format:"date"},{key:"thermal_warning",label:"Thermal Runaway Warning",format:"boolean",critical:{equals:!0}}]},BATTERY_12V:{id:"battery_12v",label:"12V Battery (LV)",icon:"battery-low",description:"Pin 12V phụ trợ",priority:2,aliases:["VEHICLE_STATUS_LV_BATTERY_SOC"],fields:[{key:"battery_health_12v",label:"12V Battery SOC",unit:"%",format:"number",warning:{below:50},critical:{below:30}}]},CHARGING:{id:"charging",label:"Charging Status",icon:"bolt",description:"Trạng thái sạc xe",priority:3,aliases:["CHARGING_STATUS_CHARGING_STATUS","CHARGING_STATUS_CHARGING_REMAINING_TIME","CHARGE_CONTROL_CURRENT_TARGET_SOC","CHARGING_STATUS_TARGET_SOC_CONTROL","CHARGING_STATUS_CURRENT_POWER","CHARGING_STATUS_VOLTAGE","CHARGING_STATUS_CURRENT","REMOTE_CONTROL_CHARGE_PORT_STATUS"],fields:[{key:"charging_status",label:"Charging Status",format:"enum",enumMap:{0:"Not Plugged",1:"Plugged - Not Charging",2:"Charging",3:"Charging Complete",4:"Charging Error"}},{key:"remaining_charging_time",label:"Time Remaining",unit:"mins",format:"duration"},{key:"target_soc",label:"Target SOC",unit:"%",format:"number"},{key:"charging_power",label:"Charging Power",unit:"kW",format:"number"},{key:"charging_voltage",label:"Charging Voltage",unit:"V",format:"number"},{key:"charging_current",label:"Charging Current",unit:"A",format:"number"},{key:"charge_port_status",label:"Charge Port",format:"enum",enumMap:{0:"Closed",1:"Open"}}]},VEHICLE_GENERAL:{id:"vehicle_general",label:"Vehicle Status",icon:"car",description:"Trạng thái chung của xe",priority:4,aliases:["VEHICLE_STATUS_ODOMETER","VEHICLE_STATUS_VEHICLE_SPEED","VEHICLE_STATUS_GEAR_POSITION","VEHICLE_STATUS_IGNITION_STATUS","VEHICLE_STATUS_HANDBRAKE_STATUS","VEHICLE_STATUS_CENTRAL_LOCK_STATUS","VEHICLE_STATUS_VEHICLE_DRVICE_MODE","VEHICLE_STATUS_BRAKE_REGEN_MODE","VEHICLE_STATUS_BRAKE_POSITION","VEHICLE_STATUS_ACCELERATOR_PEDAL_POSITION","VEHICLE_STATUS_NUMBER_OF_PASSENGERS","VEHICLE_STATUS_PARKING_DURATION"],fields:[{key:"odometer",label:"Odometer",unit:"km",format:"number",decimals:1},{key:"speed",label:"Current Speed",unit:"km/h",format:"number"},{key:"gear_position",label:"Gear Position",format:"enum",enumMap:{0:"P",1:"R",2:"N",3:"D",4:"S"}},{key:"ignition_status",label:"Ignition",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"handbrake_status",label:"Handbrake",format:"boolean",trueLabel:"Engaged",falseLabel:"Released"},{key:"central_lock_status",label:"Central Lock",format:"boolean",trueLabel:"Locked",falseLabel:"Unlocked"},{key:"drive_mode",label:"Drive Mode",format:"enum",enumMap:{0:"Eco",1:"Normal",2:"Sport"}},{key:"regen_mode",label:"Regen Braking",format:"enum",enumMap:{0:"Off",1:"Low",2:"Medium",3:"High"}},{key:"brake_position",label:"Brake Pedal",unit:"%",format:"number"},{key:"accelerator_position",label:"Accelerator Pedal",unit:"%",format:"number"},{key:"passengers",label:"Passengers Detected",format:"number"},{key:"parking_duration",label:"Parked Duration",format:"duration",unit:"mins"}]},TIRES:{id:"tires",label:"Tire Pressure (TPMS)",icon:"tire",description:"Áp suất và nhiệt độ lốp",priority:5,aliases:["VEHICLE_STATUS_FRONT_LEFT_TIRE_PRESSURE","VEHICLE_STATUS_FRONT_RIGHT_TIRE_PRESSURE","VEHICLE_STATUS_REAR_LEFT_TIRE_PRESSURE","VEHICLE_STATUS_REAR_RIGHT_TIRE_PRESSURE","VEHICLE_STATUS_FRONT_LEFT_TIRE_TEMPERATURE","VEHICLE_STATUS_FRONT_RIGHT_TIRE_TEMPERATURE","VEHICLE_STATUS_REAR_LEFT_TIRE_TEMPERATURE","VEHICLE_STATUS_REAR_RIGHT_TIRE_TEMPERATURE","VEHICLE_WARNINGS_FRONT_LEFT_TIRE_PRESSURE_LOW_STATUS","VEHICLE_WARNINGS_FRONT_RIGHT_TIRE_PRESSURE_LOW_STATUS","VEHICLE_WARNINGS_REAR_LEFT_TIRE_PRESSURE_LOW_STATUS","VEHICLE_WARNINGS_REAR_RIGHT_TIRE_PRESSURE_LOW_STATUS"],fields:[{key:"tire_pressure_fl",label:"Front Left Pressure",unit:"bar",format:"number",decimals:1,warning:{below:2.2,above:3.2},critical:{below:1.8}},{key:"tire_pressure_fr",label:"Front Right Pressure",unit:"bar",format:"number",decimals:1,warning:{below:2.2,above:3.2},critical:{below:1.8}},{key:"tire_pressure_rl",label:"Rear Left Pressure",unit:"bar",format:"number",decimals:1,warning:{below:2.2,above:3.2},critical:{below:1.8}},{key:"tire_pressure_rr",label:"Rear Right Pressure",unit:"bar",format:"number",decimals:1,warning:{below:2.2,above:3.2},critical:{below:1.8}},{key:"tire_temp_fl",label:"Front Left Temperature",unit:"°C",format:"number",warning:{above:60},critical:{above:80}},{key:"tire_temp_fr",label:"Front Right Temperature",unit:"°C",format:"number",warning:{above:60},critical:{above:80}},{key:"tire_temp_rl",label:"Rear Left Temperature",unit:"°C",format:"number",warning:{above:60},critical:{above:80}},{key:"tire_temp_rr",label:"Rear Right Temperature",unit:"°C",format:"number",warning:{above:60},critical:{above:80}}]},DOORS:{id:"doors",label:"Doors & Security",icon:"door",description:"Trạng thái cửa và bảo mật",priority:6,aliases:["DOOR_AJAR_FRONT_LEFT_DOOR_STATUS","DOOR_AJAR_FRONT_RIGHT_DOOR_STATUS","DOOR_AJAR_REAR_LEFT_DOOR_STATUS","DOOR_AJAR_REAR_RIGHT_DOOR_STATUS","DOOR_BONNET_DOOR_STATUS","DOOR_TRUNK_DOOR_STATUS","REMOTE_CONTROL_DOOR_STATUS","VEHICLE_STATUS_LOCK_STATUS","VEHICLE_WARNINGS_DOORS_TRUNK_OPENING_WARNING_STATUS","VEHICLE_WARNINGS_TRUNK_OPENING_WARNING_STATUS","VEHICLE_WARNINGS_BONNET_OPENING_WARNING_STATUS","VEHICLE_WARNINGS_ANTI_THIEF_DECTECTION_ALARM_STATUS"],fields:[{key:"door_fl",label:"Front Left Door",format:"boolean",trueLabel:"Open",falseLabel:"Closed",warning:{equals:!0}},{key:"door_fr",label:"Front Right Door",format:"boolean",trueLabel:"Open",falseLabel:"Closed",warning:{equals:!0}},{key:"door_rl",label:"Rear Left Door",format:"boolean",trueLabel:"Open",falseLabel:"Closed",warning:{equals:!0}},{key:"door_rr",label:"Rear Right Door",format:"boolean",trueLabel:"Open",falseLabel:"Closed",warning:{equals:!0}},{key:"hood_status",label:"Hood (Bonnet)",format:"boolean",trueLabel:"Open",falseLabel:"Closed",warning:{equals:!0}},{key:"trunk_status",label:"Trunk",format:"boolean",trueLabel:"Open",falseLabel:"Closed",warning:{equals:!0}},{key:"is_locked",label:"Vehicle Lock",format:"boolean",trueLabel:"Locked",falseLabel:"Unlocked"},{key:"anti_theft_alarm",label:"Anti-Theft Alarm",format:"boolean",trueLabel:"Triggered",falseLabel:"Normal",critical:{equals:!0}}]},WINDOWS:{id:"windows",label:"Windows & Sunroof",icon:"window",description:"Trạng thái cửa kính và cửa sổ trời",priority:7,aliases:["REMOTE_CONTROL_WINDOW_STATUS","WINDOW_FRONT_LEFT_STATUS","WINDOW_FRONT_RIGHT_STATUS","WINDOW_REAR_LEFT_STATUS","WINDOW_REAR_RIGHT_STATUS","WINDOW_SUNROOF_STATUS","VEHICLE_WARNINGS_WINDOWS_OPENING_WARNING_STATUS","VEHICLE_WARNINGS_SUNROOF_OPENING_WARNING_STATUS"],fields:[{key:"window_status",label:"Windows Status",format:"enum",enumMap:{0:"All Closed",1:"Some Open",2:"All Open"}},{key:"window_fl",label:"Front Left Window",format:"enum",enumMap:{0:"Closed",1:"Partial",2:"Open"}},{key:"window_fr",label:"Front Right Window",format:"enum",enumMap:{0:"Closed",1:"Partial",2:"Open"}},{key:"window_rl",label:"Rear Left Window",format:"enum",enumMap:{0:"Closed",1:"Partial",2:"Open"}},{key:"window_rr",label:"Rear Right Window",format:"enum",enumMap:{0:"Closed",1:"Partial",2:"Open"}},{key:"sunroof_status",label:"Sunroof",format:"enum",enumMap:{0:"Closed",1:"Tilted",2:"Open"}}]},CLIMATE:{id:"climate",label:"Climate Control",icon:"thermometer",description:"Điều hòa và nhiệt độ",priority:8,aliases:["VEHICLE_STATUS_AMBIENT_TEMPERATURE","VEHICLE_STATUS_INTERIOR_TEMPERATURE","CLIMATE_INFORMATION_STATUS","CLIMATE_INFORMATION_DRIVER_TEMPERATURE","CLIMATE_INFORMATION_PASSENGER_TEMPERATURE","CLIMATE_INFORMATION_DRIVER_AIR_BLOW_LEVEL","CLIMATE_INFORMATION_DRIVER_AC_MODE","CLIMATE_INFORMATION_FRONT_DEFROST","CLIMATE_INFORMATION_MAX_AC","CLIMATE_INFORMATION_RE_CIRCULATION","CLIMATE_INFORMATION_DUAL_CLIMATE_SYNC","CLIMATE_INFORMATION_IONLIZER"],fields:[{key:"outside_temp",label:"Outside Temperature",unit:"°C",format:"number",decimals:1},{key:"inside_temp",label:"Cabin Temperature",unit:"°C",format:"number",decimals:1},{key:"climate_status",label:"A/C Status",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"climate_driver_temp",label:"Driver Set Temp",unit:"°C",format:"number"},{key:"climate_passenger_temp",label:"Passenger Set Temp",unit:"°C",format:"number"},{key:"fan_speed",label:"Fan Speed",format:"enum",enumMap:{0:"Off",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"Auto"}},{key:"ac_mode",label:"A/C Mode",format:"string"},{key:"defrost_front",label:"Front Defrost",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"max_ac",label:"Max A/C",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"recirculation",label:"Air Recirculation",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"dual_climate_sync",label:"Dual Zone Sync",format:"boolean",trueLabel:"Synced",falseLabel:"Independent"},{key:"ionizer",label:"Ionizer",format:"boolean",trueLabel:"ON",falseLabel:"OFF"}]},SEATS:{id:"seats",label:"Seat Controls",icon:"seat",description:"Ghế ngồi sưởi/làm mát",priority:9,aliases:["CLIMATE_INFORMATION_FRONT_LEFT_SEAT_HEATING","CLIMATE_INFORMATION_FRONT_RIGHT_SEAT_HEATING","CLIMATE_INFORMATION_FRONT_LEFT_SEAT_VENTILATION","CLIMATE_INFORMATION_FRONT_RIGHT_SEAT_VENTILATION","CLIMATE_INFORMATION_FRONT_LEFT_SEAT_COOLING","CLIMATE_INFORMATION_FRONT_RIGHT_SEAT_COOLING","CLIMATE_INFORMATION_REAR_LEFT_SEAT_HEATING","CLIMATE_INFORMATION_REAR_RIGHT_SEAT_HEATING","CLIMATE_INFORMATION_REAR_LEFT_SEAT_VENTILATION","CLIMATE_INFORMATION_REAR_RIGHT_SEAT_VENTILATION","CLIMATE_INFORMATION_REAR_LEFT_SEAT_COOLING","CLIMATE_INFORMATION_REAR_RIGHT_SEAT_COOLING","VEHICLE_STATUS_DRIVER_RECLINER_POSITION","VEHICLE_STATUS_DRIVER_TILT_POSITION","VEHICLE_STATUS_DRIVER_TRACK_POSITION","VEHICLE_STATUS_DRIVER_HEIGHT_POSITION"],fields:[{key:"seat_heat_fl",label:"Driver Seat Heating",format:"enum",enumMap:{0:"Off",1:"Low",2:"Medium",3:"High"}},{key:"seat_heat_fr",label:"Passenger Seat Heating",format:"enum",enumMap:{0:"Off",1:"Low",2:"Medium",3:"High"}},{key:"seat_vent_fl",label:"Driver Seat Ventilation",format:"enum",enumMap:{0:"Off",1:"Low",2:"Medium",3:"High"}},{key:"seat_vent_fr",label:"Passenger Seat Ventilation",format:"enum",enumMap:{0:"Off",1:"Low",2:"Medium",3:"High"}},{key:"seat_cool_fl",label:"Driver Seat Cooling",format:"enum",enumMap:{0:"Off",1:"Low",2:"Medium",3:"High"}},{key:"seat_cool_fr",label:"Passenger Seat Cooling",format:"enum",enumMap:{0:"Off",1:"Low",2:"Medium",3:"High"}},{key:"seat_heat_rl",label:"Rear Left Seat Heating",format:"enum",enumMap:{0:"Off",1:"Low",2:"Medium",3:"High"}},{key:"seat_heat_rr",label:"Rear Right Seat Heating",format:"enum",enumMap:{0:"Off",1:"Low",2:"Medium",3:"High"}}]},LOCATION:{id:"location",label:"Location & GPS",icon:"location",description:"Vị trí và GPS",priority:10,aliases:["LOCATION_LATITUDE","LOCATION_LONGITUDE","LOCATION_ALTITUDE","LOCATION_VELOCITY","LOCATION_BEARING_DEGREE","LOCATION_GNSS_STATUS","LOCATION_TIMESTAMP"],fields:[{key:"latitude",label:"Latitude",format:"coordinate",decimals:6},{key:"longitude",label:"Longitude",format:"coordinate",decimals:6},{key:"altitude",label:"Altitude",unit:"m",format:"number"},{key:"heading",label:"Heading",unit:"°",format:"number"},{key:"gps_velocity",label:"GPS Speed",unit:"km/h",format:"number"},{key:"gps_status",label:"GPS Signal",format:"enum",enumMap:{0:"No Fix",1:"2D Fix",2:"3D Fix"}},{key:"location_address",label:"Address",format:"string"}]},SPECIAL_MODES:{id:"special_modes",label:"Special Modes",icon:"star",description:"Chế độ đặc biệt",priority:11,aliases:["PET_MODE_CONTROL_STATUS","CAMP_MODE_CONTROL_STATUS","VALET_MODE_CONTROL_STATUS","SENTRY_MODE_CONTROL_STATUS"],fields:[{key:"pet_mode",label:"Pet Mode",format:"boolean",trueLabel:"Active",falseLabel:"Inactive"},{key:"camp_mode",label:"Camp Mode",format:"boolean",trueLabel:"Active",falseLabel:"Inactive"},{key:"valet_mode",label:"Valet Mode",format:"boolean",trueLabel:"Active",falseLabel:"Inactive"},{key:"sentry_mode",label:"Sentry Mode",format:"boolean",trueLabel:"Active",falseLabel:"Inactive"}]},LIGHTS:{id:"lights",label:"Lights",icon:"lightbulb",description:"Hệ thống đèn",priority:12,aliases:["LIGHT_FRONT_FOG_LAMP_LIGHT_STATUS","LIGHT_POSITION_LIGHT_LIGHT_STATUS","LIGHT_INTERIOR_LIGHT_LIGHT_STATUS","LIGHT_LOW_BEAM_LIGHT_LIGHT_STATUS","LIGHT_HIGH_BEAM_LIGHT_LIGHT_STATUS","LIGHT_TURNS_INDICATOR_LIGHT_LIGHT_STATUS","LIGHT_BREAK_LIGHT_LIGHT_STATUS","LIGHT_REAR_FOG_LIGHT_LIGHT_STATUS","LIGHT_DAY_RUNNING_LIGHT_LIGHT_STATUS","LIGHT_AUTO_HEADLIGHT_LIGHT_STATUS","LIGHT_LICENSE_PLATE_LIGHT_LIGHT_STATUS","LIGHT_FRONT_DIMMING_DOME_LIGHT_LIGHT_STATUS","LIGHT_REAR_DIMMING_DOME_LIGHT_LIGHT_STATUS","LIGHT_REVERT_LIGHT_LIGHT_STATUS"],fields:[{key:"light_low_beam",label:"Low Beam",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"light_high_beam",label:"High Beam",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"light_fog_front",label:"Front Fog Lights",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"light_fog_rear",label:"Rear Fog Lights",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"light_drl",label:"Daytime Running Lights",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"light_auto",label:"Auto Headlights",format:"boolean",trueLabel:"Enabled",falseLabel:"Disabled"},{key:"light_interior",label:"Interior Lights",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"light_turn_indicator",label:"Turn Indicators",format:"enum",enumMap:{0:"Off",1:"Left",2:"Right",3:"Hazard"}},{key:"light_brake",label:"Brake Lights",format:"boolean",trueLabel:"ON",falseLabel:"OFF"},{key:"light_reverse",label:"Reverse Lights",format:"boolean",trueLabel:"ON",falseLabel:"OFF"}]},SAFETY:{id:"safety",label:"Crash & Safety",icon:"shield",description:"An toàn và phát hiện va chạm",priority:13,aliases:["VEHICLE_CRASH_STATUS_FRONT_CRASH","VEHICLE_CRASH_STATUS_REAR_CRASH","VEHICLE_CRASH_STATUS_SIDE_LEFT_CRASH","VEHICLE_CRASH_STATUS_SIDE_RIGHT_CRASH","VEHICLE_CRASH_STATUS_ROLL_OVER_CRASH","VEHICLE_CRASH_STATUS_ACTIVE_PEDESTRIAN_PROTECTION_CRASH","VEHICLE_CRASH_STATUS_AIRBAG_DEPLOYED","VEHICLE_CRASH_STATUS_E_CALL_ACTIVATED","VEHICLE_CRASH_STATUS_GENERAL_CRASH_DETECTED","VEHICLE_WARNINGS_CHILD_PRESENT_DETECTION_ALARM_STATUS","VEHICLE_WARNINGS_CHILD_PET_PRESENT_DETECTION_ALARM_TO_BCM_STATUS"],fields:[{key:"crash_front",label:"Front Crash",format:"boolean",trueLabel:"Detected",falseLabel:"None",critical:{equals:!0}},{key:"crash_rear",label:"Rear Crash",format:"boolean",trueLabel:"Detected",falseLabel:"None",critical:{equals:!0}},{key:"crash_left",label:"Left Side Crash",format:"boolean",trueLabel:"Detected",falseLabel:"None",critical:{equals:!0}},{key:"crash_right",label:"Right Side Crash",format:"boolean",trueLabel:"Detected",falseLabel:"None",critical:{equals:!0}},{key:"crash_rollover",label:"Rollover",format:"boolean",trueLabel:"Detected",falseLabel:"None",critical:{equals:!0}},{key:"airbag_deployed",label:"Airbag Deployed",format:"boolean",trueLabel:"YES",falseLabel:"NO",critical:{equals:!0}},{key:"ecall_activated",label:"eCall Activated",format:"boolean",trueLabel:"YES",falseLabel:"NO",critical:{equals:!0}},{key:"child_detection",label:"Child Detection",format:"boolean",trueLabel:"Detected",falseLabel:"Clear",warning:{equals:!0}}]},WARNINGS:{id:"warnings",label:"Warnings & Alerts",icon:"warning",description:"Cảnh báo hệ thống",priority:14,aliases:["VEHICLE_WARNINGS_LOW_FUEL_BATTERY_WARNING_STATUS","VEHICLE_WARNINGS_HV_BATTERY_LOW_SOC_WARNING_STATUS","VEHICLE_WARNINGS_SPEED_LIMIT_WARNING_STATUS","VEHICLE_WARNINGS_COOLANT_LEVEL_LOW_WARNING_STATUS","VEHICLE_WARNINGS_CHARGE_LID_OPENING_WARNING_STATUS","CCARSERVICE_OBJECT_BOOKING_SERVICE_STATUS"],fields:[{key:"warning_low_battery",label:"Low Battery Warning",format:"boolean",trueLabel:"Active",falseLabel:"Normal",warning:{equals:!0}},{key:"warning_hv_low_soc",label:"HV Battery Low SOC",format:"boolean",trueLabel:"Active",falseLabel:"Normal",warning:{equals:!0}},{key:"warning_speed_limit",label:"Speed Limit Warning",format:"boolean",trueLabel:"Active",falseLabel:"Normal"},{key:"warning_coolant_low",label:"Low Coolant",format:"boolean",trueLabel:"Low",falseLabel:"Normal",warning:{equals:!0}},{key:"warning_charge_lid",label:"Charge Lid Open",format:"boolean",trueLabel:"Open",falseLabel:"Closed"},{key:"service_alert",label:"Service Alert",format:"string"}]},TRIPS:{id:"trips",label:"Trip Information",icon:"route",description:"Thông tin chuyến đi",priority:15,aliases:["TRIPS_INFORMATION_TRIP_A_DISTANCE","TRIPS_INFORMATION_TRIP_A_AVERAGE_SPEED","TRIPS_INFORMATION_TRIP_A_AVERAGE_POWER_CONSUMPTION_NON_VFE34","TRIPS_INFORMATION_TRIP_B_DISTANCE","TRIPS_INFORMATION_TRIP_B_AVERAGE_SPEED","TRIPS_INFORMATION_TRIP_B_AVERAGE_POWER_CONSUMPTION_NON_VFE34","TRIPS_INFORMATION_CURRENT_TRIP_DISTANCE","TRIPS_INFORMATION_CURRENT_TRIP_AVERAGE_SPEED","TRIPS_INFORMATION_CURRENT_TRIP_AVERAGE_POWER_CONSUMPTION_NON_VFE34"],fields:[{key:"trip_a_distance",label:"Trip A Distance",unit:"km",format:"number",decimals:1},{key:"trip_a_avg_speed",label:"Trip A Avg Speed",unit:"km/h",format:"number"},{key:"trip_a_consumption",label:"Trip A Consumption",unit:"kWh/100km",format:"number",decimals:1},{key:"trip_b_distance",label:"Trip B Distance",unit:"km",format:"number",decimals:1},{key:"trip_b_avg_speed",label:"Trip B Avg Speed",unit:"km/h",format:"number"},{key:"trip_b_consumption",label:"Trip B Consumption",unit:"kWh/100km",format:"number",decimals:1},{key:"current_trip_distance",label:"Current Trip Distance",unit:"km",format:"number",decimals:1},{key:"current_trip_avg_speed",label:"Current Trip Avg Speed",unit:"km/h",format:"number"},{key:"current_trip_consumption",label:"Current Trip Consumption",unit:"kWh/100km",format:"number",decimals:1}]},FIRMWARE:{id:"firmware",label:"Firmware & ECU",icon:"cpu",description:"Phiên bản phần mềm và ECU",priority:16,aliases:["FIRMWARE_UPDATE_CURRENT_PKG_VERSION","FIRMWARE_UPDATE_STATE","FIRMWARE_UPDATE_TOTAL_OVERALL_PROGRESS","VERSION_INFO_TBOX_SOFTWARE_VERSION"],fields:[{key:"firmware_version",label:"Firmware Version",format:"string"},{key:"firmware_state",label:"Update State",format:"enum",enumMap:{0:"Idle",1:"Downloading",2:"Ready",3:"Installing",4:"Complete",5:"Error"}},{key:"firmware_progress",label:"Update Progress",unit:"%",format:"number"},{key:"tbox_version",label:"T-Box Version",format:"string"}]},ECU_MODULES:{id:"ecu_modules",label:"ECU Modules",icon:"microchip",description:"Thông tin các bộ điều khiển điện tử",priority:17,aliases:["ECUS_INFORMATION_MHU_SOFTWARE_VERSION","ECUS_INFORMATION_MHU_HARDWARE_VERSION","ECUS_INFORMATION_MHU_MANUFACTURE","ECUS_INFORMATION_XGW_SOFTWARE_VERSION","ECUS_INFORMATION_BCM_SOFTWARE_VERSION","ECUS_INFORMATION_ACM_SOFTWARE_VERSION","ECUS_INFORMATION_VCU_SOFTWARE_VERSION","ECUS_INFORMATION_ETG_SOFTWARE_VERSION","ECUS_INFORMATION_BMS_SOFTWARE_VERSION"],fields:[{key:"ecu_mhu_sw",label:"MHU (Infotainment)",format:"string"},{key:"ecu_mhu_hw",label:"MHU Hardware",format:"string"},{key:"ecu_mhu_manufacturer",label:"MHU Manufacturer",format:"string"},{key:"ecu_xgw_sw",label:"XGW (Gateway)",format:"string"},{key:"ecu_bcm_sw",label:"BCM (Body Control)",format:"string"},{key:"ecu_acm_sw",label:"ACM (A/C Module)",format:"string"},{key:"ecu_vcu_sw",label:"VCU (Vehicle Control)",format:"string"},{key:"ecu_etg_sw",label:"ETG (E-Trans)",format:"string"},{key:"ecu_bms_sw",label:"BMS (Battery)",format:"string"}]},IDENTITY:{id:"identity",label:"Vehicle Identity",icon:"id-card",description:"Thông tin định danh xe",priority:18,aliases:["VINFAST_VEHICLE_IDENTIFIER_VIN_NUMBER","VINFAST_VEHICLE_IDENTIFIER_VEHICLE_MANUFACTURER","VINFAST_VEHICLE_IDENTIFIER_MODEL_YEAR","VINFAST_VEHICLE_IDENTIFIER_VEHICLE_NAME","VINFAST_VEHICLE_IDENTIFIER_VEHICLE_OWNER","VINFAST_VEHICLE_MASTER_INFO_VEHICLE_PLATFORM","VINFAST_VEHICLE_MASTER_INFO_VEHICLE_CLASS","VINFAST_VEHICLE_MASTER_INFO_ENGINE_TYPE","VINFAST_VEHICLE_MASTER_INFO_VEHICLE_VARIANT","VINFAST_VEHICLE_MASTER_INFO_MARKET_AREA","VINFAST_VEHICLE_MASTER_INFO_MARKETING_NAME"],fields:[{key:"vin_number",label:"VIN Number",format:"string"},{key:"manufacturer",label:"Manufacturer",format:"string"},{key:"model_year",label:"Model Year",format:"string"},{key:"vehicle_name",label:"Vehicle Name",format:"string"},{key:"owner_name",label:"Owner Name",format:"string"},{key:"platform",label:"Platform",format:"string"},{key:"vehicle_class",label:"Vehicle Class",format:"string"},{key:"engine_type",label:"Engine Type",format:"string"},{key:"variant",label:"Variant",format:"string"},{key:"market_area",label:"Market Area",format:"string"},{key:"marketing_name",label:"Marketing Name",format:"string"}]},CONNECTIVITY:{id:"connectivity",label:"Connectivity & Services",icon:"wifi",description:"Kết nối và dịch vụ",priority:19,aliases:["CAPP_PAIRING_STATUS","CAPP_PAIRING_DEVICE_ID","DATA_PRIVACY_SETTING","BATTERY_LEASING_STATUS","CCARSERVICE_OBJECT_SERVICE_STATUS"],fields:[{key:"pairing_status",label:"App Pairing",format:"boolean",trueLabel:"Connected",falseLabel:"Not Connected"},{key:"device_id",label:"Paired Device ID",format:"string"},{key:"data_privacy",label:"Data Privacy",format:"enum",enumMap:{0:"Off",1:"Basic",2:"Full"}},{key:"battery_leasing",label:"Battery Leasing",format:"boolean",trueLabel:"Active",falseLabel:"Inactive"},{key:"service_status",label:"Connected Service",format:"enum",enumMap:{0:"Inactive",1:"Active",2:"Expired"}}]},REALTIME_BUS:{id:"realtime_bus",label:"Real-time Sensor Data",icon:"cpu",description:"Dữ liệu cảm biến thời gian thực từ bus CAN",priority:20,aliases:[],fields:[]},TELLTALES:{id:"telltales",label:"Dashboard Indicators",icon:"lightbulb",description:"Đèn báo bảng điều khiển",priority:21,aliases:[],fields:[]},ADAS:{id:"adas",label:"Driver Assistance (ADAS)",icon:"shield",description:"Hỗ trợ lái xe nâng cao",priority:22,aliases:[],fields:[]}},ee={VEHICLE_STATUS_HV_BATTERY:"battery_main",VEHICLE_STATUS_LV_BATTERY:"battery_12v",VEHICLE_STATUS_REMAINING:"battery_main",BMS_STATUS:"battery_main",BATTERY_LEASING:"connectivity",CHARGE_CONTROL:"charging",CHARGING_STATUS:"charging",PNC_INFORMATION:"charging",REMOTE_CONTROL_CHARGE_PORT:"charging",VEHICLE_STATUS_FRONT_LEFT_TIRE:"tires",VEHICLE_STATUS_FRONT_RIGHT_TIRE:"tires",VEHICLE_STATUS_REAR_LEFT_TIRE:"tires",VEHICLE_STATUS_REAR_RIGHT_TIRE:"tires",VEHICLE_STATUS_AMBIENT:"climate",VEHICLE_STATUS_INTERIOR:"climate",VEHICLE_STATUS:"vehicle_general",DOOR_AJAR:"doors",DOOR_BONNET:"doors",DOOR_TRUNK:"doors",REMOTE_CONTROL_DOOR:"doors",REMOTE_CONTROL_BONNET:"doors",REMOTE_CONTROL_WINDOW:"windows",WINDOW:"windows",CLIMATE_INFORMATION:"climate",CLIMATE_CONTROL:"climate",CLIMATE_SCHEDULE:"climate",CAMP_MODE:"special_modes",PET_MODE:"special_modes",VALET_MODE:"special_modes",SENTRY_MODE:"special_modes",LIGHT_:"lights",VEHICLE_CRASH:"safety",SEAT_BELT:"safety",ECALL_INFO:"safety",IMMOBILIZATION:"safety",INTRUSION:"safety",VEHICLE_WARNINGS:"warnings",DTCS_RECORD:"warnings",TRIPS_INFORMATION:"trips",DRIVING_STATISTICS:"trips",LOCATION:"location",ISA_MAP:"location",FIRMWARE:"firmware",FOTA:"firmware",ESYNC:"firmware",VERSION_INFO:"firmware",TBOX:"firmware",ECUS_INFORMATION:"ecu_modules",VINFAST_ECU:"ecu_modules",VINFAST_VEHICLE:"identity",CAPP_PAIRING:"connectivity",CCARSERVICE:"connectivity",DATA_PRIVACY:"connectivity",NETWORK_ACCESS:"connectivity",CYBERSECURITY:"connectivity",TELEMATICS_LOG:"connectivity",MHU_ACCESS:"connectivity",DATABASE_EXCHANGE:"connectivity",REMOTE_DIAGNOCTICS:"connectivity",ASSUARANCE_SERVICE:"connectivity",REALTIME_BUS:"realtime_bus",TELLTALES:"telltales",ADAS:"adas",DRIVER_ASSISTANCE:"adas",VISION_SNAPSHOT:"adas",REMOTE_CONTROL:"vehicle_general"},ae=Object.values(f).sort((r,i)=>r.priority-i.priority),k=new Map;for(const r of Object.values(f))for(const i of r.aliases)k.has(i)||k.set(i,r);const te=()=>ae,re=r=>k.get(r)||null,le=()=>{const r=[];for(const i of Object.values(f))r.push(...i.aliases);return[...new Set(r)]},ie=()=>{let r=0;for(const i of Object.values(f))r+=i.fields.length;return r};Object.keys(f).length,le().length,ie();let R=null;function ne(){if(R)return R;R={};for(const[r,i]of Object.entries(J)){const a=`${i.objectId}_${i.instanceId}_${i.resourceId}`;R[a]||(R[a]=r)}return R}function j(r){if(!r)return null;const i=ne();if(i[r])return i[r];const a=r.split("_");if(a.length<3)return null;const s=`${parseInt(a[0],10)}_${parseInt(a[1],10)}_${parseInt(a[2],10)}`;return i[s]||null}const oe=["VINFAST_VEHICLE_MASTER_INFO_","VINFAST_VEHICLE_IDENTIFIER_","NETWORK_ACCESS_DEVICE_INFO_","TBOX_MANUAL_SOFTWARE_UPDATE_INFO_","ASSUARANCE_SERVICE_DATA_","TELEMATICS_LOG_RECORD_UPLINK_","TELEMATICS_LOG_RECORD_","REALTIME_BUS_MONITORING_NULL_","REALTIME_BUS_MONITORING_","DRIVING_STATISTICS_REPORT_","VEHICLE_CRASH_STATUS_","TELLTALES_NOTIFICATION_","CYBERSECURITY_INFO_","TBOX_RUNTIME_INFO_","VISION_SNAPSHOT_","SEAT_BELT_STATUS_","TRIPS_INFORMATION_","CLIMATE_INFORMATION_","CLIMATE_SCHEDULE_","CLIMATE_CONTROL_","CHARGING_STATUS_","CHARGE_CONTROL_","FIRMWARE_UPDATE_","ECUS_INFORMATION_","VEHICLE_WARNINGS_","VEHICLE_STATUS_","REMOTE_CONTROL_","REMOTE_DIAGNOCTICS_","DRIVER_ASSISTANCE_","PNC_INFORMATION_","CCARSERVICE_OBJECT_","DATABASE_EXCHANGE_","NETWORK_ACCESS_","VINFAST_ECU_","ADAS_REMOTE_CONTROL_","ADAS_RP_INFORMATION_","ADAS_SUMMON_INFORMATION_","ADAS_USAGE_INFORMATION_","DOOR_AJAR_","DOOR_BONNET_","DOOR_TRUNK_","BMS_STATUS_","BATTERY_LEASING_INFO_","CAMP_MODE_CONTROL_","PET_MODE_CONTROL_","VALET_MODE_CONTROL_","SENTRY_MODE_CONTROL_","IMMOBILIZATION_AWS_","IMMOBILIZATION_","INTRUSION_","DTCS_RECORD_","ISA_MAP_","MHU_ACCESS_","CAPP_PAIRING_INFO_","CAPP_PAIRING_","FOTA_COMMAND_","ECALL_INFO_","ESYNC_PROVISION_","DATA_PRIVACY_","VERSION_INFO_","WINDOW_AJAR_","WINDOW_SUNROOF_","WINDOW_SUNSHADE_","WINDOW_","LIGHT_","LOCATION_","REALTIME_BUS_"],se=new Set(["SOC","SOH","HV","LV","BMS","TPMS","GPS","VCU","BCM","ECU","MHU","ACM","XGW","ETG","ABS","ESP","EBD","DRL","VIN","ADAS","OTA","USB","AC","DC","HVAC","LED","OBD","PNC","DTC","DTCS","ICCID","IMEI","RSA","MSD","GNSS","JSON","PKG","SW","HW","ID","UID","IP","URL","API","AWS","SUL","ISO","CAN","LIN","MCU","SPI","UART","PWM","ADC","DAC","ROM","RAM","CPU","DSM","EPB","ESC","TCS","ACC","AEB","LKA","LDW","BSM","RPA","NFC","OBC","PDC","USS","ISA","TBOX","EV","RP"]);function _e(r){if(!r)return null;let i=r;for(const s of oe)if(i.startsWith(s)){i=i.slice(s.length);break}return(!i||i.length<2)&&(i=r),i.split("_").filter(Boolean).map(s=>{const c=s.toUpperCase();return se.has(c)?c:/^\d+$/.test(s)?s:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()}).join(" ")}const W={battery:["M4 8h16v8H4V8zm16 2h2v4h-2V10zM7 11h4v2H7v-2z","text-green-600"],"battery-low":["M4 8h16v8H4V8zm16 2h2v4h-2V10z","text-yellow-600"],bolt:["M13 10V3L4 14h7v7l9-11h-7z","text-blue-600"],car:["M8 17l4 4 4-4m-4-5v9M3 7l9-4 9 4M3 7l9 4 9-4M3 7v10l9 4 9-4V7","text-gray-600"],thermometer:["M12 9V3m0 18a4 4 0 100-8 4 4 0 000 8zm0-8V9","text-red-500"],seat:["M5 19h14M7 14l1-5h8l1 5M7 14v5m10-5v5","text-purple-600"],location:[["M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],"text-red-600"],warning:["M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z","text-amber-500"],route:["M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7","text-indigo-600"],cpu:["M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z","text-gray-600"],lightbulb:["M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z","text-yellow-500"],shield:["M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z","text-red-600"],wifi:["M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.14 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0","text-blue-500"],search:["M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z","text-purple-600"],star:["M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z","text-yellow-500",!0]},B={tire:e.jsxs("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"4",strokeWidth:"2"})]}),door:e.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h18v18H3V3zm5 9h2"})}),window:e.jsxs("svg",{className:"w-4 h-4 text-cyan-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeWidth:"2"}),e.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12",strokeWidth:"2"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"21",strokeWidth:"2"})]}),microchip:e.jsxs("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"1",strokeWidth:"2"}),e.jsx("path",{strokeLinecap:"round",strokeWidth:"2",d:"M9 1v4m6-4v4M9 19v4m6-4v4M1 9h4m-4 6h4M19 9h4m-4 6h4"})]}),"id-card":e.jsx("svg",{className:"w-4 h-4 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V4a2 2 0 114 0v2m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})}),ellipsis:e.jsxs("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"5",cy:"12",r:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"}),e.jsx("circle",{cx:"19",cy:"12",r:"2"})]})},Te=({icon:r})=>{if(B[r])return B[r];const i=W[r]||W.cpu,[a,s,c]=i;return e.jsx("svg",{className:`w-4 h-4 ${s}`,fill:c?"currentColor":"none",stroke:c?"none":"currentColor",viewBox:"0 0 24 24",children:Array.isArray(a)?a.map((N,u)=>e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:N},u)):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:a})})},ce=(r,i)=>{if(r==null)return"N/A";if(i){const{format:a,enumMap:s,trueLabel:c,falseLabel:N,decimals:u}=i;if(a==="boolean")return r===!0||r===1||r==="1"||r==="true"?c||"Yes":N||"No";if(a==="enum"&&s)return s[r]||String(r);if(a==="number"&&typeof u=="number")return Number(r).toFixed(u);if(a==="duration"){const A=Number(r);if(A>=60){const C=Math.floor(A/60),g=A%60;return`${C}h ${g}m`}return`${A} min`}if(a==="coordinate")return Number(r).toFixed(u||6)}return String(r)},Ee=(r,i)=>{if(!i)return"normal";const a=Number(r),{warning:s,critical:c}=i;return c&&(c.below!==void 0&&a<c.below||c.above!==void 0&&a>c.above||c.equals!==void 0&&(r===c.equals||a===c.equals))?"critical":s&&(s.below!==void 0&&a<s.below||s.above!==void 0&&a>s.above||s.equals!==void 0&&(r===s.equals||a===s.equals))?"warning":"normal"};function me({isOpen:r,onClose:i}){const a=F(Z),s=F(Q),[c,N]=O.useState(""),u=O.useRef(0),A=O.useRef(!1),C=a.fullTelemetryData[a.vin]||[],g=a.fullTelemetryAliases[a.vin]||[],H=a.fullTelemetryTimestamps[a.vin],h=a.debugLogByVin?.[a.vin]||a.debugLog||[],U=L.useMemo(()=>!r||!a.vin?[]:G(a.vin).map(l=>l.raw),[r,a.vin,s]),M=U.length>C.length?U:C,v=L.useMemo(()=>M.map(l=>{const t=(l.deviceKey||"").split("_"),o=String(parseInt(t[0],10)),n=String(parseInt(t[1],10)),T=String(parseInt(t[2],10)),_=g.find(b=>String(b.devObjID)===o&&String(b.devObjInstID||"0")===n&&String(b.devRsrcID||"0")===T),I=_?.alias||j(`${o}_${n}_${T}`)||"";let d=_?.name||null;d&&(d.toLowerCase()==="status"||d.toLowerCase()==="door status"||d.toLowerCase()==="configuration json")&&(d=`${I.split("_").slice(0,-1).map(S=>S.charAt(0).toUpperCase()+S.slice(1).toLowerCase()).join(" ")} ${d}`);const y=d||_e(I)||null;return{...l,name:y,units:_?.units||null,alias:I}}),[M,g]),m=L.useMemo(()=>{const l=c.toLowerCase();return v.filter(E=>{const t=(E.deviceKey||"").toLowerCase(),o=String(E.value||"").toLowerCase(),n=(E.name||"").toLowerCase(),T=(E.alias||"").toLowerCase();return t.includes(l)||o.includes(l)||n.includes(l)||T.includes(l)})},[v,c]),p=L.useMemo(()=>{const l={};if(te().forEach(t=>{l[t.id]={id:t.id,label:t.label,icon:t.icon,description:t.description,priority:t.priority,items:[],fieldConfig:t.fields||[]}}),l.others={id:"others",label:"Other Parameters",icon:"ellipsis",priority:800,items:[],fieldConfig:[]},m.forEach(t=>{const o=t.alias||"";let n=null;const T=re(o);if(T)n=T.id;else for(const[I,d]of Object.entries(ee))if(o.startsWith(I)){n=d;break}const _=n||"others";if(l[_]){const I=l[_].fieldConfig.find(d=>o.toLowerCase().includes(d.key.replace(/_/g,"")));l[_].items.push({...t,fieldConfig:I||null})}}),h&&h.length>0){const t=M,o=h.map(_=>{const I=String(_.devObjID),d=String(_.devObjInstID||"0"),y=String(_.devRsrcID||"0"),S=t.find(w=>{if(!w.deviceKey)return!1;const x=w.deviceKey.split("_"),K=String(parseInt(x[0],10)),$=String(parseInt(x[1],10)),q=String(parseInt(x[2],10));return K===I&&$===d&&q===y})?.value??null,D=S!==null&&S!==""&&S!==void 0;return{name:_.resourceName||_.alias||"Service Data",alias:_.alias,deviceKey:`${I}/${d}/${y}`,value:D?S:null,units:_.units||null,isCandidate:!D}}),n=o.filter(_=>!_.isCandidate),T=o.filter(_=>_.isCandidate);n.length>0&&(l.service_data={id:"service_data",label:"Service & Maintenance",icon:"search",description:"Dữ liệu dịch vụ và bảo trì",priority:900,items:n,fieldConfig:[]}),T.length>0&&(l.no_data={id:"no_data",label:"No Data Available",icon:"ellipsis",description:"Aliases không có dữ liệu trả về",priority:1e3,items:T,fieldConfig:[]})}return Object.values(l).forEach(t=>{if(t.id==="no_data"||t.id==="service_data")return;const o=t.items.filter(n=>n.value===null||n.value===void 0||n.value===""||n.value==="No data");o.length>0&&(l.no_data||(l.no_data={id:"no_data",label:"No Data Available",icon:"ellipsis",description:"Aliases không có dữ liệu trả về",priority:1e3,items:[],fieldConfig:[]}),o.forEach(n=>{n.originalGroup=t.label}),l.no_data.items.push(...o),t.items=t.items.filter(n=>n.value!==null&&n.value!==void 0&&n.value!==""&&n.value!=="No data"))}),Object.values(l).filter(t=>t.items.length>0).sort((t,o)=>t.id==="debug_scan"?-1:o.id==="debug_scan"||t.id==="others"?1:o.id==="others"?-1:(t.priority||999)-(o.priority||999))},[m,h]);O.useEffect(()=>{r&&a.vin&&(u.current=Date.now(),A.current=!1,P(a.vin))},[r,a.vin]);const V=L.useCallback(()=>{if(!a.vin)return 0;const E=G(a.vin).filter(t=>t.raw?.value!==null&&t.raw?.value!==void 0&&t.raw?.value!=="").map(t=>{const n=(t.raw?.deviceKey||"").split("_"),T=String(parseInt(n[0],10)),_=String(parseInt(n[1],10)),I=String(parseInt(n[2],10));return{objectId:T,instanceId:_,resourceId:I,alias:t.raw?.alias||j(`${T}_${_}_${I}`)||""}}).filter(t=>t.objectId&&t.resourceId&&t.objectId!=="NaN");if(E.length>0){const t=a.vehicles?.find(T=>T.vinCode===a.vin),o=t?.marketingName||"unknown",n=t?.yearOfProduct||"unknown";return X.reportKnownAliases(o,n,E,a.vin),console.log(`[Deep Scan] Reported ${E.length} known-good aliases to KV (model=${o}, year=${n})`),E.length}return 0},[a.vin,a.vehicles]);O.useEffect(()=>{if(!r||!a.vin||A.current)return;const l=setTimeout(()=>{if(!r||A.current)return;V()>0&&(A.current=!0)},3e3);return()=>clearTimeout(l)},[r,a.vin,s,V]);const Y=async()=>{!a.vin||a.isScanning||await P(a.vin,!0)},z=()=>{const l={vin:a.vin,timestamp:new Date().toISOString(),data:v},E=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),t=URL.createObjectURL(E),o=document.createElement("a");o.href=t,o.download=`vfdash_telemetry_${a.vin}_${new Date().getTime()}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)};return r?e.jsxs("div",{className:"fixed inset-0 z-[100] flex justify-end overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:i}),e.jsxs("div",{className:"relative w-full max-w-lg bg-white shadow-2xl flex flex-col h-full animate-slide-in-right",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gradient-to-r from-blue-50 to-indigo-50",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),"Deep Scan"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[e.jsx("span",{className:"text-xs font-mono text-gray-500 uppercase tracking-tight bg-white/70 px-1.5 py-0.5 rounded border border-gray-200",children:a.vin}),H&&e.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(H).toLocaleTimeString()}),p.length>0&&e.jsxs("span",{className:"text-[10px] text-blue-600 bg-blue-100 px-1.5 py-0.5 rounded font-bold",children:[p.length," groups"]}),a.isScanning&&m.length>0&&e.jsx("span",{className:"text-[10px] text-green-600 bg-green-100 px-1.5 py-0.5 rounded font-bold animate-pulse",children:"Updating..."})]})]}),e.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"px-6 py-3 border-b border-gray-100 flex gap-2 overflow-hidden shrink-0",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Search by key or value...",className:"w-full pl-9 pr-4 py-2 bg-gray-100 border-transparent focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent rounded-lg text-sm transition-all outline-none",value:c,onChange:l=>N(l.target.value)}),e.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute left-3 top-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("button",{onClick:Y,disabled:a.isScanning,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white text-sm font-bold rounded-lg shadow-md transition-all active:scale-95",title:"Refresh MQTT telemetry snapshot",children:[e.jsx("svg",{className:`w-4 h-4 ${a.isScanning?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{className:"hidden sm:inline",children:a.isScanning?"Refreshing...":"Refresh"})]}),e.jsxs("button",{onClick:z,disabled:m.length===0,className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 hover:bg-indigo-100 disabled:bg-gray-100 text-indigo-600 disabled:text-gray-400 text-sm font-bold rounded-lg border border-indigo-100 transition-all active:scale-95",title:"Export to JSON",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-0 custom-scrollbar bg-gray-50/30",children:m.length===0&&!a.isScanning?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 9.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"font-medium",children:c?"No results found":"No telemetry data yet"}),e.jsx("p",{className:"text-xs mt-1",children:"MQTT data will appear as it arrives"})]}):m.length===0&&a.isScanning?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600/20 border-t-blue-600 rounded-full animate-spin"}),e.jsx("svg",{className:"w-8 h-8 text-blue-600 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-900 font-bold",children:"Loading telemetry..."}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Waiting for MQTT data..."}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:"Data will appear progressively as it arrives"})]})]}):m.length>0?e.jsx("div",{className:"bg-white",children:p.map((l,E)=>e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"px-6 py-3 bg-gradient-to-r from-gray-100 to-gray-50 border-y border-gray-200 sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{icon:l.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-black text-gray-700 uppercase tracking-widest leading-none",children:l.label}),l.description&&e.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:l.description})]}),e.jsx("span",{className:"ml-auto text-[10px] font-bold text-gray-400 bg-white px-2 py-0.5 rounded-full border border-gray-200",children:l.items.length})]})}),e.jsx("div",{className:"divide-y divide-gray-100",children:l.items.map((t,o)=>{const n=t.fieldConfig,T=Ee(t.value,n),_=ce(t.value,n),I=n?.unit||t.units;return e.jsx("div",{className:`px-6 py-4 transition-colors group/row overflow-hidden ${T==="critical"?"bg-red-50 hover:bg-red-100/50":T==="warning"?"bg-amber-50 hover:bg-amber-100/50":"hover:bg-blue-50/30"}`,children:e.jsx("div",{className:"flex justify-between items-start gap-4",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex-1 group/name flex items-center min-w-0",children:[T!=="normal"&&e.jsx("span",{className:`shrink-0 mr-2 ${T==="critical"?"text-red-500":"text-amber-500"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2L1 21h22L12 2zm0 3.83L19.13 19H4.87L12 5.83zM11 16h2v2h-2v-2zm0-6h2v4h-2v-4z"})})}),e.jsx("p",{className:"text-sm font-bold text-gray-900 leading-tight truncate",children:n?.label||t.name||t.alias||"Unknown Parameter"}),I&&e.jsx("span",{className:"shrink-0 text-[10px] font-bold text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded ml-2",children:I})]}),e.jsx("div",{className:"mt-0.5 group/alias min-w-0",children:e.jsx("p",{className:"text-[10px] font-mono font-medium text-gray-400 uppercase leading-none group-hover/row:text-blue-500 transition-colors truncate",children:t.alias||t.deviceKey})}),e.jsx("div",{className:`mt-2 text-sm font-semibold p-2 rounded border group/value ${t.isCandidate||t.value==="No data"?"text-gray-400 bg-gray-50 border-dashed border-gray-200 italic":T==="critical"?"text-red-700 bg-red-100/50 border-red-200":T==="warning"?"text-amber-700 bg-amber-100/50 border-amber-200":"text-gray-800 bg-gray-100/50 border-gray-100"}`,children:e.jsx("span",{className:"truncate block",children:t.isCandidate?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"No telemetry data available"]}):_})})]})})},o)})})]},E))}):null}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 bg-gradient-to-r from-gray-50 to-blue-50 text-[10px] text-gray-500 flex justify-between items-center shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-bold",children:[m.length," parameters"]}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsxs("span",{children:[p.length," categories"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Critical"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-amber-500 rounded-full"}),"Warning"]})]})]})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
        @keyframes slide-in-right {
          from { transform: translateX(100%); }
          to { transform: translateX(0); }
        }
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: rgba(0,0,0,0.05);
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: rgba(0,0,0,0.1);
        }
      `}})]}):null}export{me as default};
